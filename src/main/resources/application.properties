# ===========================================
# SHOPHUB E-COMMERCE - APPLICATION CONFIGURATION
# ===========================================
#
# SECURITY WARNING:
# - DO NOT commit this file with actual credentials
# - Use environment variables for production
# - Generate strong JWT secret (256-bit random)
# - Never use default passwords
#
# ===========================================

# ===========================================
# SERVER CONFIGURATION
# ===========================================
server.port=${PORT:8080}
server.error.include-message=never
server.error.include-stacktrace=never

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Use environment variables in production
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/ecommerce_db}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection pool settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# ===========================================
# JPA/HIBERNATE CONFIGURATION
# ===========================================
# IMPORTANT: Set ddl-auto to 'validate' in production
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}

# SECURITY: Disable SQL logging in production
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===========================================
# JWT CONFIGURATION
# ===========================================
# CRITICAL SECURITY:
# - Generate secure 256-bit secret: openssl rand -base64 64
# - NEVER use the example below in production
# - Store in environment variable: export JWT_SECRET=your_secret_here
jwt.secret=${JWT_SECRET}
jwt.access-token-expiration=900000
jwt.refresh-token-expiration=604800000

# ===========================================
# CORS CONFIGURATION
# ===========================================
# Production: Set to your actual frontend URL
cors.allowed-origins=${CORS_ORIGINS:http://localhost:3000}

# ===========================================
# FILE UPLOAD CONFIGURATION
# ===========================================
upload.directory=${UPLOAD_DIR:uploads/products/}

# File size limits (5MB for images, 10MB total request)
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
# Production: Set root to WARN, application to INFO
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.com.shophub=${LOG_LEVEL_APP:DEBUG}

# Security: Don't log sensitive data
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=${LOG_FILE:logs/shophub.log}
logging.file.max-size=10MB
logging.file.max-history=30

# ===========================================
# SECURITY HEADERS
# ===========================================
# These will be added in SecurityConfig
# - X-Content-Type-Options: nosniff
# - X-Frame-Options: DENY
# - X-XSS-Protection: 1; mode=block
# - Strict-Transport-Security (HTTPS only)

# ===========================================
# ACTUATOR ENDPOINTS (Optional - for monitoring)
# ===========================================
# Uncomment for production monitoring
# management.endpoints.web.exposure.include=health,info,metrics
# management.endpoint.health.show-details=when-authorized
# management.metrics.export.prometheus.enabled=true

# ===========================================
# ENVIRONMENT-SPECIFIC NOTES
# ===========================================
#
# DEVELOPMENT:
# - Use this file as-is
# - SQL logging can be enabled: spring.jpa.show-sql=true
# - DDL auto-update is safe: spring.jpa.hibernate.ddl-auto=update
#
# PRODUCTION:
# 1. Create application-prod.properties
# 2. Set all ${...} variables via environment variables
# 3. Use strong JWT secret (256-bit)
# 4. Set ddl-auto=validate (never update/create)
# 5. Disable SQL logging
# 6. Use secure database password
# 7. Enable HTTPS
# 8. Set CORS to actual frontend domain
# 9. Configure proper logging
# 10. Enable actuator for monitoring
#
# Environment Variables Required:
# - JWT_SECRET (CRITICAL - 256-bit random string)
# - DB_URL (database connection string)
# - DB_USERNAME (database user)
# - DB_PASSWORD (database password)
# - CORS_ORIGINS (frontend URL)
#
# Example production startup:
# export JWT_SECRET=$(openssl rand -base64 64)
# export DB_PASSWORD=your_secure_password
# export CORS_ORIGINS=https://yourdomain.com
# java -jar shophub-backend.jar --spring.profiles.active=prod
#
# ===========================================

server.error.include-message=always
server.error.include-stacktrace=always

# Disable Spring Security auto-generated default user
spring.security.user.name=
spring.security.user.password=
